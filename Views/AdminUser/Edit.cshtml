@model StudentFreelance.Models.CVInputModel
@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>CV @Model.FullName</title>
    <link rel="stylesheet" href="~/css/cv1.css" />
</head>
<body>
    <form method="post" asp-action="ExportToPDF">
        <div class="container">
            <!-- Cột trái -->
            <div class="left-column">
                <img src="https://wallpapercave.com/wp/wp7171957.jpg" alt="@Model.FullName" class="profile-img">

                <div class="section name">
                    <h2 contenteditable="true" class="editable-block" data-field="FullName">@Model.FullName.ToUpper()</h2>
                    <input type="hidden" name="FullName" />

                    <div class="editable-block" contenteditable="true" data-field="CareerGoal">
                        @Model.CareerGoal
                    </div>
                    <input type="hidden" name="CareerGoal" />
                </div>

                <div class="section">
                    <h3>Kinh nghiệm</h3>
                    <div class="editable-block" contenteditable="true" data-field="Experience">
                        @Model.Experience
                    </div>
                    <input type="hidden" name="Experience" />
                </div>

                <div class="section">
                    <h3>Học vấn</h3>
                    <div>
                        <strong contenteditable="true" class="editable-block" data-field="University">
                            @Model.University
                        </strong><br />
                        GPA:
                        <span contenteditable="true" class="editable-block" data-field="GPA">
                            @Model.GPA
                        </span>
                        <input type="hidden" name="University" />
                        <input type="hidden" name="GPA" />
                    </div>
                </div>
            </div>

            <!-- Cột phải -->
            <div class="right-column">
                <div class="section">
                    <h3>Thông tin</h3>
                    <p>
                        <strong>Ngành:</strong>
                        <span contenteditable="true" class="editable-block" data-field="Industry">
                            @Model.Industry
                        </span>
                        <input type="hidden" name="Industry" />
                    </p>
                    <p>
                        <strong>Vị trí:</strong>
                        <span contenteditable="true" class="editable-block" data-field="JobTitle">
                            @Model.JobTitle
                        </span>
                        <input type="hidden" name="JobTitle" />
                    </p>
                </div>

                <div class="section brown">
                    <h3>Kỹ năng chuyên môn</h3>
                    <div class="editable-block" contenteditable="true" data-field="Skills">
                        @Model.Skills
                    </div>
                    <input type="hidden" name="Skills" />
                </div>

                <div class="section brown">
                    <h3>Kỹ năng mềm</h3>
                    <div class="editable-block" contenteditable="true" data-field="SoftSkills">
                        @Model.SoftSkills
                    </div>
                    <input type="hidden" name="SoftSkills" />
                </div>

                <div class="section brown">
                    <h3>Dự án</h3>
                    <div class="editable-block" contenteditable="true" data-field="ProjectsText">
                        @string.Join("\n", Model.ProjectsRaw ?? new List<string>())
                    </div>
                    <input type="hidden" name="ProjectsText" />
                </div>
            </div>
        </div>

        <div class="submit-btn">
            <button type="submit">Xuất PDF</button>
        </div>
    </form>

    <script>
        document.querySelector('form').addEventListener('submit', function () {
            document.querySelectorAll('.editable-block').forEach(block => {
                const field = block.getAttribute('data-field');
                const input = document.querySelector(`input[name="${field}"]`);
                if (input) {
                    input.value = block.innerText.trim();
                }
            });
        });
    </script>
</body>
</html>
