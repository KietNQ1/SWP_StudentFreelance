@model StudentFreelance.ViewModels.UserProfileViewModel
@{
    ViewData["Title"] = "Tất cả đánh giá";
}

<style>
    :root {
        --primary: #89AC46;
        --accent1: #D3E671;
        --accent2: #F8ED8C;
        --accent3: #FF8989;
    }

    body {
        background-color: #F8F8F8;
        font-family: 'Segoe UI', sans-serif;
        color: #222;
    }

    .card {
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
        border-left: 5px solid var(--primary);
        background-color: #fff;
    }

    .card-header.bg-light {
        background-color: var(--accent2) !important;
        color: #222;
        font-weight: 600;
    }

    .star-rating i {
        color: #f5c518;
        margin-right: 2px;
    }

    .page-link {
        color: var(--primary);
    }

    .page-item.active .page-link {
        background-color: var(--accent1);
        border-color: var(--accent1);
        color: #000;
        font-weight: bold;
    }

    .back-btn {
        background-color: var(--primary); /* xanh lá cây */
        border: none;
        color: white;
        padding: 8px 18px;
        border-radius: 6px;
        font-weight: 600;
        text-decoration: none;
    }

        .back-btn:hover {
            background-color: #6c9335;
            color: white;
        }

</style>

<div class="container py-5">
    <div class="row">
        <div class="col-12">
            <a asp-action="Profile" asp-route-id="@Model.UserID" class="back-btn mb-3 d-inline-block">
                <i class="bi bi-arrow-left"></i> Quay lại trang cá nhân
            </a>

            <div class="card">
                <div class="card-header bg-light">
                    <h4 class="mb-0">Tất cả đánh giá</h4>
                </div>
                <div class="card-body">
                    @if (Model.ReceivedRatings == null || !Model.ReceivedRatings.Any())
                    {
                        <p class="text-muted">Chưa có đánh giá nào.</p>
                    }
                    else
                    {
                        @foreach (var rating in Model.ReceivedRatings)
                        {
                            <div class="mb-4 border-bottom pb-3">
                                <div class="d-flex align-items-center mb-2">
                                    <img src="@(!string.IsNullOrEmpty(rating.ReviewerAvatarPath) ? rating.ReviewerAvatarPath : "/image/default-avatar.png")"
                                         alt="Avatar"
                                         width="40" height="40"
                                         class="rounded-circle me-2"
                                         style="object-fit: cover;" />
                                    <strong>@rating.ReviewerName</strong>
                                    <span class="ms-3 text-muted">@rating.DateRated.ToString("dd/MM/yyyy")</span>
                                </div>

                                <div class="mb-1">
                                    @for (int i = 1; i <= 5; i++)
                                    {
                                        if (i <= rating.Score)
                                        {
                                            <i class="bi bi-star-fill text-warning"></i>
                                        }
                                        else
                                        {
                                            <i class="bi bi-star text-muted"></i>
                                        }
                                    }
                                </div>
                                <div>
                                    <p class="mb-0">@rating.Comment</p>
                                </div>
                            </div>
                        }

                        @if (Model.TotalPages > 1)
                        {
                            <nav>
                                <ul class="pagination justify-content-center">
                                    @for (int page = 1; page <= Model.TotalPages; page++)
                                    {
                                        <li class="page-item @(Model.CurrentPage == page ? "active" : "")">
                                            <a class="page-link" href="@Url.Action("AllReviews", "User", new { page })">@@page</a>
                                        </li>
                                    }
                                </ul>
                            </nav>
                        }
                    }
                </div>
            </div>
        </div>
    </div>
</div>
